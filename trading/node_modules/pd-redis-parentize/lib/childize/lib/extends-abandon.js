'use strict';
var nomen = require('./nomenclt');
module.exports = function (Child, Parent) {
    var abandonName = nomen.abandon(Parent);
    Child[abandonName] = function (childSid, parentSid) {
        var relKey = nomen.childOf(Child, Parent, parentSid);
        var childDataKey = Child.nm.dataForSid(childSid);
        var childLinkField = nomen.parentSid(Parent);
        var profile = {
            'pd-sid': childSid
        };
        return Child.modify(profile, function (multis) {
            [
                ['hdel', childDataKey, childLinkField],
                ['zrem', relKey, childSid]
            ].forEach(function (multiItem) {
                    multis.push(multiItem);
                });
            return multis;
        });
    };
};
