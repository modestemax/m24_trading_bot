'use strict';
var _ = require('underscore');

module.exports = function (Record, profile, option) {
    var opt = option || {};
    var multis = opt.multis || _.noop;
    var checkExistance = opt.existence || _.noop;
    var sid = profile['pd-sid'];
    var redis = Record.redis;
    return checkExistance(Record, sid).then(function () {
        return multis(sid, profile);
    }).then(function (multiList) {
        return redis.multi(multiList);
    });
};
