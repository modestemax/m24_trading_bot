'use strict';
var q = require('q');

module.exports = function (Record) {
    return q.Promise(function (resolve) {
        resolve(Record.amount());
    }).then(function (amount) {
        if (parseInt(amount) > 0) {
            throw new Error('not-empty-sid-set');
        }
        return Record.redis.exec('del', Record.nm.sidValue());
    });
};
