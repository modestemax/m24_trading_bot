'use strict';
var _ = require('underscore');
var utility = {
    uniqSetOf: function (Record, uniqDef) {
        return 'uniq-of:' + Record.modelName() + ':at:' + Record.uniqFieldsOf(uniqDef).toString();
    },
    uniqIdOf: function (Record, uniqDef, profile) {
        return (_.map(Record.uniqFieldsOf(uniqDef), function (field) {
            return profile[field];
        }) || []).toString();
    }
};
module.exports = utility;
module.exports.specFor = function (Record) {
    return {
        uniqSetOf: function (uniqDef) {
            return utility.uniqSetOf(Record, uniqDef);
        },
        uniqIdOf: function (uniqDef, profile) {
            return utility.uniqIdOf(Record, uniqDef, profile);
        }
    };
};