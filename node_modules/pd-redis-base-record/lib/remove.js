'use strict';
var q = require('q');

module.exports = function (Record, sid, multiGen) {
    var nomen = Record.nm;
    var redis = Record.redis;
    var strSid = sid + '';
    var dataKey = nomen.dataForSid(strSid);
    var sidSetKey = nomen.sidSet();

    return q.Promise(function (rslv) {
        var defaultMultis = [
            ['del', dataKey],
            ['zrem', sidSetKey, strSid]
        ];
        var mlistGen = multiGen || function (mList) {
                return mList;
            };
        rslv(
            mlistGen(defaultMultis, strSid)
        );
    }).then(function (mList) {
        return redis.multi(mList);
    });
};
