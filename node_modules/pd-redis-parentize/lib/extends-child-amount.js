'use strict';
var nm = require('./parenthood-nomenclt');
var methodNomen = require('./nomenclt');

module.exports = function (Parent, Child) {
    var childAmountName = methodNomen.counterFor(Child);
    Parent[childAmountName] = function (parentSid) {
        var redis = Child.redis;
        var cardKey = nm.childOf(Child.modelName(), Parent.modelName(), parentSid);
        return redis.exec('zcard', [cardKey]).then(function (reply) {
            return parseInt(reply);
        });
    };
};